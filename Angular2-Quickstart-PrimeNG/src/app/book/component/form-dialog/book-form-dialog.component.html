<p-dialog [(visible)]="displayDialog" [responsive]="true" showEffect="fade" [modal]="true">
  <p-header>
    <h3>{{(currentBook?.id) ? currentBook.title : 'New Book'}}</h3>
  </p-header>

  <form novalidate [formGroup]="bookForm" (ngSubmit)="saveBook()">
    <div *ngIf="currentBook" class="ui-grid ui-grid-responsive ui-fluid" style="min-width: 500px">
      <div class="ui-grid-row">
        <div class="ui-grid-col-4"><label for="title">Title</label></div>
        <div class="ui-grid-col-8"><input pInputText id="title" formControlName="title" />
          <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!bookForm.controls['title'].valid && (bookForm.controls['title'].dirty || bookForm.controls['title'].touched)">
            <i class="fa fa-close"></i>
            <span *ngIf="bookForm.controls['title'].errors['required']">Is required</span>
            <span *ngIf="bookForm.controls['title'].errors['minlength']">Must be longer than 8 characters</span>
          </div>
        </div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-4"><label for="author">Author</label></div>
        <div class="ui-grid-col-8"><input pInputText id="author" formControlName="author" />
          <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!bookForm.controls['author'].valid && (bookForm.controls['author'].dirty || bookForm.controls['author'].touched)">
            <i class="fa fa-close"></i>
            <span *ngIf="bookForm.controls['author'].errors['required']">Is required</span>
            <span *ngIf="bookForm.controls['author'].errors['minlength']">Must be longer than 4 characters</span>
          </div>
        </div>
      </div>
      <div class="ui-grid-row">
        <div class="ui-grid-col-4"><label for="inStock">InStock</label></div>
        <div class="ui-grid-col-8">
          <p-checkbox id="inStock" formControlName="inStock" binary="true"></p-checkbox>
          <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!bookForm.controls['inStock'].valid && (bookForm.controls['inStock'].dirty || bookForm.controls['inStock'].touched)">
            <i class="fa fa-close"></i>
            <span *ngIf="bookForm.controls['inStock'].errors['required']">Is required</span>
          </div>
        </div>
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-4"><label for="price">Price (â‚¬)</label></div>
      <div class="ui-grid-col-8"><input pInputText id="price" formControlName="price" />
        <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!bookForm.controls['price'].valid && (bookForm.controls['price'].dirty || bookForm.controls['price'].touched)">
          <i class="fa fa-close"></i>
          <span *ngIf="bookForm.controls['price'].errors['required']">Is required</span>
        </div>
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-4"><label for="language">Language</label></div>
      <div class="ui-grid-col-8"><input pInputText id="language" formControlName="language" />
        <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!bookForm.controls['language'].valid && (bookForm.controls['language'].dirty || bookForm.controls['language'].touched)">
          <i class="fa fa-close"></i>
          <span *ngIf="bookForm.controls['language'].errors['required']">Is required</span>
        </div>
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-4"><label for="isbn">ISBN</label></div>
      <div class="ui-grid-col-8"><input pInputText id="isbn" formControlName="isbn" />
        <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!bookForm.controls['isbn'].valid && (bookForm.controls['isbn'].dirty || bookForm.controls['isbn'].touched)">
          <i class="fa fa-close"></i>
          <span *ngIf="bookForm.controls['isbn'].errors['required']">Is required</span>
        </div>
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-4"><label for="release">Release</label></div>
      <div class="ui-grid-col-8">
        <p-calendar id="release" formControlName="release" dateFormat="dd.mm.yy" ngDefaultControl></p-calendar>
        <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!bookForm.controls['release'].valid && (bookForm.controls['release'].dirty || bookForm.controls['release'].touched)">
          <i class="fa fa-close"></i>
          <span *ngIf="bookForm.controls['release'].errors['required']">Is required</span>
        </div>
      </div>
    </div>
    <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
      <div class="left">
        <button type="button" pButton icon="fa-close" (click)="closeDialog()" label="Cancel"></button>
        <button type="submit" pButton icon="fa-check" [disabled]="!bookForm.valid" label="Save"></button>
      </div>
      <div class="right">
        <button type="button" pButton icon="fa-trash" (click)="deleteBook()" class="ui-button-danger right" label="Delete" *ngIf="currentBook?.id"></button>
      </div>
    </div>
  </form>
</p-dialog>